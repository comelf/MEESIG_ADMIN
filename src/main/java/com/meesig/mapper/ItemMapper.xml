<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ItemMapper">
        
        <select id="selectSortedItemListForManagement" resultType="itemForList">
        	select i.item_id, c.category_name, s.shop_name, i.item_name, i.item_img_filename, i.item_img_extension, i.item_sell_price, i.item_state, l.location_name, i.item_write_date
				from items as i
				left join item_category as c 
       				on i.item_category_id = c.category_id
       			left join shops as s
       				on i.shops_shop_id  = s.shop_id
       			join locations as l 
       				on s.LOCATIONS_LOCATION_ID =l.location_id
       			order by i.item_id desc limit #{start}, #{count} 
        </select>
        
        <select id="countTotalItem" resultType="int">
        	select count(item_id) from items
        </select>
        
</mapper>
