-- MySQL Script generated by MySQL Workbench
-- Thu Mar 26 10:45:47 2015
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema MEESIG
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `MEESIG` ;

-- -----------------------------------------------------
-- Schema MEESIG
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `MEESIG` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `MEESIG` ;

-- -----------------------------------------------------
-- Table `MEESIG`.`ITEM_CATEGORY`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`ITEM_CATEGORY` (
  `category_id` INT NOT NULL AUTO_INCREMENT,
  `category_name` VARCHAR(100) NULL,
  PRIMARY KEY (`category_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`MEDIA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`MEDIA` (
  `media_id` INT NOT NULL AUTO_INCREMENT,
  `media_file_name` VARCHAR(100) NULL,
  `media_file_extension` VARCHAR(10) NULL,
  `media_file_path` VARCHAR(100) NULL,
  `media_origin_name` VARCHAR(100) NULL,
  `media_upload_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `media_type` TINYINT NULL DEFAULT 1,
  `media_type_detail` INT NULL,
  `media_file_des` VARCHAR(100) NULL,
  PRIMARY KEY (`media_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`LOCATIONS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`LOCATIONS` (
  `location_id` INT NOT NULL AUTO_INCREMENT,
  `location_code` TINYINT NOT NULL,
  `location_name` VARCHAR(200) NULL,
  `MEDIA_media_id` INT NOT NULL,
  PRIMARY KEY (`location_id`),
  UNIQUE INDEX `location_code_UNIQUE` (`location_code` ASC),
  INDEX `fk_LOCATIONS_MEDIA1_idx` (`MEDIA_media_id` ASC),
  CONSTRAINT `fk_LOCATIONS_MEDIA1`
    FOREIGN KEY (`MEDIA_media_id`)
    REFERENCES `MEESIG`.`MEDIA` (`media_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`SHOPS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`SHOPS` (
  `shop_id` INT NOT NULL AUTO_INCREMENT,
  `LOCATIONS_LOCATION_ID` INT NOT NULL,
  `shop_name` VARCHAR(50) NULL,
  `shop_discription` VARCHAR(100) NULL,
  `shop_content` TEXT NULL,
  `shop_location_detail` VARCHAR(45) NULL,
  `shop_state` TINYINT NULL,
  `MEDIA_media_id` INT NOT NULL,
  PRIMARY KEY (`shop_id`),
  INDEX `fk_SHOPS_SHOP_LOCATION1_idx` (`LOCATIONS_LOCATION_ID` ASC),
  INDEX `fk_SHOPS_MEDIA1_idx` (`MEDIA_media_id` ASC),
  CONSTRAINT `fk_SHOPS_SHOP_LOCATION1`
    FOREIGN KEY (`LOCATIONS_LOCATION_ID`)
    REFERENCES `MEESIG`.`LOCATIONS` (`location_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_SHOPS_MEDIA1`
    FOREIGN KEY (`MEDIA_media_id`)
    REFERENCES `MEESIG`.`MEDIA` (`media_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`ITEMS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`ITEMS` (
  `item_id` INT NOT NULL AUTO_INCREMENT,
  `ITEM_CATEGORY_ID` INT NOT NULL,
  `SHOPS_SHOP_ID` INT NOT NULL,
  `MEDIA_media_id` INT NOT NULL,
  `item_name` VARCHAR(50) NULL,
  `item_path_url` VARCHAR(20) NULL,
  `item_description` VARCHAR(100) NULL,
  `item_sell_price` BIGINT NULL DEFAULT 0,
  `item_sale_price` BIGINT NULL DEFAULT 0,
  `item_supply_price` BIGINT NULL DEFAULT 0,
  `item_content` TEXT NULL,
  `item_recommend` TEXT NULL,
  `item_origin` TEXT NULL,
  `item_shipping` TEXT NULL,
  `item_write_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `item_daily_stock` INT NULL DEFAULT 0,
  `item_option_state` TINYINT NULL DEFAULT 0,
  `item_shipping_day_state` TINYINT NULL,
  `item_shipping_price_state` TINYINT NULL,
  `item_new_menu_state` TINYINT NULL DEFAULT 0,
  PRIMARY KEY (`item_id`),
  INDEX `fk_ITEMS_ITEM_CATEGORY1_idx` (`ITEM_CATEGORY_ID` ASC),
  INDEX `fk_ITEMS_SHOPS1_idx` (`SHOPS_SHOP_ID` ASC),
  INDEX `fk_ITEMS_MEDIA1_idx` (`MEDIA_media_id` ASC),
  CONSTRAINT `fk_ITEMS_ITEM_CATEGORY1`
    FOREIGN KEY (`ITEM_CATEGORY_ID`)
    REFERENCES `MEESIG`.`ITEM_CATEGORY` (`category_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ITEMS_SHOPS1`
    FOREIGN KEY (`SHOPS_SHOP_ID`)
    REFERENCES `MEESIG`.`SHOPS` (`shop_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ITEMS_MEDIA1`
    FOREIGN KEY (`MEDIA_media_id`)
    REFERENCES `MEESIG`.`MEDIA` (`media_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`USERS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`USERS` (
  `user_id` INT NOT NULL AUTO_INCREMENT,
  `user_login_id` VARCHAR(25) NOT NULL,
  `user_crc_id` INT NOT NULL,
  `user_password` CHAR(34) NOT NULL,
  `user_name` VARCHAR(20) NULL,
  `user_email` VARCHAR(50) NULL,
  `user_b_date` DATE NULL,
  `user_gender` CHAR(4) NULL,
  `user_join_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `user_exit_date` DATETIME NULL,
  `user_status` TINYINT NULL DEFAULT 1,
  `user_point` INT NULL DEFAULT 0,
  `user_grade` TINYINT NULL DEFAULT 0,
  `user_role` VARCHAR(20) NULL,
  `user_location` VARCHAR(45) NULL,
  `user_enabled` TINYINT(1) NULL DEFAULT 0,
  PRIMARY KEY (`user_id`),
  INDEX `user_crc_index` (`user_crc_id` ASC),
  FULLTEXT INDEX `user_login_id_fulltext` (`user_login_id` ASC),
  FULLTEXT INDEX `user_name_fulltext` (`user_name` ASC),
  FULLTEXT INDEX `user_email_fulltext` (`user_email` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`NOTICE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`NOTICE` (
  `notice_id` INT NOT NULL AUTO_INCREMENT,
  `notice_title` VARCHAR(100) NULL,
  `notice_content` TEXT NULL,
  `notice_date` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `notice_type` VARCHAR(45) NULL,
  PRIMARY KEY (`notice_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`BLOG`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`BLOG` (
  `blog_id` INT NOT NULL AUTO_INCREMENT,
  `blog_title` VARCHAR(100) NULL,
  `blog_img_url` VARCHAR(300) NULL,
  `blog_content` TEXT NULL,
  `blog_date` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`blog_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`ITEM_REVIEW`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`ITEM_REVIEW` (
  `review_id` INT NOT NULL AUTO_INCREMENT,
  `ITEMS_ITEM_ID` INT NOT NULL,
  `review_grade` FLOAT NULL,
  `review_image` VARCHAR(300) NULL,
  `review_content` TEXT NULL,
  `review_writer` VARCHAR(20) NULL,
  `review_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`review_id`),
  INDEX `fk_ITEM_REVIEW_ITEMS1_idx` (`ITEMS_ITEM_ID` ASC),
  CONSTRAINT `fk_ITEM_REVIEW_ITEMS1`
    FOREIGN KEY (`ITEMS_ITEM_ID`)
    REFERENCES `MEESIG`.`ITEMS` (`item_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`ORDERS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`ORDERS` (
  `ORDER_ID` BIGINT NOT NULL AUTO_INCREMENT,
  `USERS_USER_ID` INT NOT NULL,
  `order_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `order_call_num` CHAR(15) NULL,
  `order_payment` VARCHAR(45) NULL,
  `order_pament_date` DATETIME NULL,
  `order_state` TINYINT NULL,
  `order_rid` CHAR(40) NULL,
  `order_sale_type` TINYINT NULL,
  `order_total_price` BIGINT NULL,
  PRIMARY KEY (`ORDER_ID`),
  INDEX `order_state` (`order_state` ASC),
  INDEX `order_date` (`order_date` ASC),
  INDEX `fk_ORDERS_USERS1_idx` (`USERS_USER_ID` ASC),
  CONSTRAINT `fk_ORDERS_USERS1`
    FOREIGN KEY (`USERS_USER_ID`)
    REFERENCES `MEESIG`.`USERS` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`BLOG_COMMENTS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`BLOG_COMMENTS` (
  `comment_id` INT NOT NULL AUTO_INCREMENT,
  `BLOG_ID` INT NOT NULL,
  `blog_comment_writer` VARCHAR(20) NULL,
  `blog_comment_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `blog_comment_content` VARCHAR(255) NULL,
  INDEX `fk_BLOG_COMMENTS_BLOG1_idx` (`BLOG_ID` ASC),
  PRIMARY KEY (`comment_id`),
  CONSTRAINT `fk_BLOG_COMMENTS_BLOG1`
    FOREIGN KEY (`BLOG_ID`)
    REFERENCES `MEESIG`.`BLOG` (`blog_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`ITEM_QNA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`ITEM_QNA` (
  `qna_id` INT NOT NULL AUTO_INCREMENT,
  `ITEMS_ITEM_ID` INT NOT NULL,
  `ITEM_QNA_QNA_ID` INT NULL,
  `qna_type` VARCHAR(20) NULL,
  `qna_content` VARCHAR(256) NULL,
  `qna_writer` VARCHAR(20) NULL,
  `qna_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `qna_state` VARCHAR(45) NULL,
  PRIMARY KEY (`qna_id`),
  INDEX `fk_ITEM_QNA_ITEMS1_idx` (`ITEMS_ITEM_ID` ASC),
  INDEX `fk_ITEM_QNA_ITEM_QNA1_idx` (`ITEM_QNA_QNA_ID` ASC),
  CONSTRAINT `fk_ITEM_QNA_ITEMS1`
    FOREIGN KEY (`ITEMS_ITEM_ID`)
    REFERENCES `MEESIG`.`ITEMS` (`item_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ITEM_QNA_ITEM_QNA1`
    FOREIGN KEY (`ITEM_QNA_QNA_ID`)
    REFERENCES `MEESIG`.`ITEM_QNA` (`qna_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`ORDER_STATE_LOGS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`ORDER_STATE_LOGS` (
  `log_num` BIGINT NOT NULL AUTO_INCREMENT,
  `ORDERS_ORDER_ID` BIGINT NOT NULL,
  `log_msg` VARCHAR(255) NULL,
  `log_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `log_maker` VARCHAR(20) NULL,
  INDEX `fk_ORDER_STATE_ORDER1_idx` (`ORDERS_ORDER_ID` ASC),
  PRIMARY KEY (`log_num`),
  CONSTRAINT `fk_ORDER_STATE_ORDER1`
    FOREIGN KEY (`ORDERS_ORDER_ID`)
    REFERENCES `MEESIG`.`ORDERS` (`ORDER_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`SHOPS_INFO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`SHOPS_INFO` (
  `info_id` INT NOT NULL AUTO_INCREMENT,
  `SHOPS_SHOP_ID` INT NOT NULL,
  `info_title` VARCHAR(100) NULL,
  `info_content` TEXT NULL,
  `info_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`info_id`),
  INDEX `fk_SHOPS_INFO_SHOPS1_idx` (`SHOPS_SHOP_ID` ASC),
  CONSTRAINT `fk_SHOPS_INFO_SHOPS1`
    FOREIGN KEY (`SHOPS_SHOP_ID`)
    REFERENCES `MEESIG`.`SHOPS` (`shop_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`SHOPS_QNA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`SHOPS_QNA` (
  `qna_id` INT NOT NULL AUTO_INCREMENT,
  `SHOPS_SHOP_ID` INT NOT NULL,
  `SHOPS_QNA_QNA_ID` INT NULL,
  `qna_type` VARCHAR(45) NULL,
  `qna_content` VARCHAR(255) NULL,
  `qna_writer` VARCHAR(20) NULL,
  `qna_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `qna_state` VARCHAR(45) NULL,
  PRIMARY KEY (`qna_id`),
  INDEX `fk_SHOPS_QNA_SHOPS1_idx` (`SHOPS_SHOP_ID` ASC),
  INDEX `fk_SHOPS_QNA_SHOPS_QNA1_idx` (`SHOPS_QNA_QNA_ID` ASC),
  CONSTRAINT `fk_SHOPS_QNA_SHOPS1`
    FOREIGN KEY (`SHOPS_SHOP_ID`)
    REFERENCES `MEESIG`.`SHOPS` (`shop_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_SHOPS_QNA_SHOPS_QNA1`
    FOREIGN KEY (`SHOPS_QNA_QNA_ID`)
    REFERENCES `MEESIG`.`SHOPS_QNA` (`qna_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`ITEM_OPTION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`ITEM_OPTION` (
  `option_id` INT NOT NULL AUTO_INCREMENT,
  `ITEMS_ITEM_ID` INT NOT NULL,
  `option_tag` TINYINT NULL,
  `option_title` VARCHAR(100) NULL,
  `option_row_id` TINYINT NULL,
  `option_row_value` VARCHAR(100) NULL,
  `option_row_price` BIGINT NULL,
  PRIMARY KEY (`option_id`),
  INDEX `fk_ITEM_OPTION_ITEMS1_idx` (`ITEMS_ITEM_ID` ASC),
  INDEX `opt_search_index` (`option_tag` ASC, `option_row_id` ASC),
  CONSTRAINT `fk_ITEM_OPTION_ITEMS1`
    FOREIGN KEY (`ITEMS_ITEM_ID`)
    REFERENCES `MEESIG`.`ITEMS` (`item_id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`ORDER_BUNDLE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`ORDER_BUNDLE` (
  `order_bundle_id` BIGINT NOT NULL AUTO_INCREMENT,
  `ITEMS_ITEM_ID` INT NOT NULL,
  `ORDERS_ORDER_ID` BIGINT NOT NULL,
  `bundle_shop_order` DATETIME NULL,
  `bundle_packing_date` DATETIME NULL,
  `bundle_send_date` DATETIME NULL,
  `bundle_recive_date` DATE NULL,
  `bundle_msg` VARCHAR(100) NULL,
  `bundle_address` VARCHAR(255) NULL,
  `bundle_recever` VARCHAR(20) NULL,
  `bundle_review` TINYINT NULL DEFAULT 0,
  `bundle_state` VARCHAR(45) NULL,
  INDEX `fk_ORDER_PACK_ITEMS1_idx` (`ITEMS_ITEM_ID` ASC),
  INDEX `fk_ORDER_PACK_ORDER1_idx` (`ORDERS_ORDER_ID` ASC),
  PRIMARY KEY (`order_bundle_id`),
  CONSTRAINT `fk_ORDER_PACK_ITEMS1`
    FOREIGN KEY (`ITEMS_ITEM_ID`)
    REFERENCES `MEESIG`.`ITEMS` (`item_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ORDER_PACK_ORDER1`
    FOREIGN KEY (`ORDERS_ORDER_ID`)
    REFERENCES `MEESIG`.`ORDERS` (`ORDER_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`ORDER_DELIVERY`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`ORDER_DELIVERY` (
  `delivery_id` INT NOT NULL AUTO_INCREMENT,
  `delivery_kind` VARCHAR(45) NULL,
  `delivery_code` VARCHAR(45) NULL,
  `delivery_date` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `delivery_price` VARCHAR(45) NULL,
  `delivery_state` TINYINT NULL,
  `ORDER_BUNDLE_order_bundle_id` BIGINT NOT NULL,
  PRIMARY KEY (`delivery_id`),
  INDEX `fk_ORDER_DELIVERY_ORDER_BUNDLE1_idx` (`ORDER_BUNDLE_order_bundle_id` ASC),
  CONSTRAINT `fk_ORDER_DELIVERY_ORDER_BUNDLE1`
    FOREIGN KEY (`ORDER_BUNDLE_order_bundle_id`)
    REFERENCES `MEESIG`.`ORDER_BUNDLE` (`order_bundle_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`ORDER_PAYMENT`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`ORDER_PAYMENT` (
  `payment_id` BIGINT NOT NULL AUTO_INCREMENT,
  `ORDERS_ORDER_ID` BIGINT NOT NULL,
  `payment_tid` VARCHAR(40) NULL,
  `payment_result_code` CHAR(2) NULL,
  `payment_result_msg` VARCHAR(200) NULL,
  `payment_moid` VARCHAR(64) NULL,
  `payment_totPrice` VARCHAR(20) NULL,
  `payment_applDate` CHAR(8) NULL,
  `payment_appTime` CHAR(6) NULL,
  `payment_applNum` VARCHAR(20) NULL,
  `payment_payMethod` VARCHAR(10) NULL,
  `payment_card_num` VARCHAR(16) NULL,
  `payment_card_code` VARCHAR(2) NULL,
  `payment_bank_code` VARCHAR(2) NULL,
  `payment_card_interest` VARCHAR(1) NULL,
  `payment_card_quota` VARCHAR(2) NULL,
  `payment_cshr_result_code` VARCHAR(10) NULL,
  `payment_cshr_type` VARCHAR(1) NULL,
  `payment_vact_num` VARCHAR(20) NULL,
  `payment_vact_name` VARCHAR(20) NULL,
  `payment_vact_input_name` VARCHAR(20) NULL,
  `payment_vact_date` VARCHAR(8) NULL,
  `payment_vact_tiem` VARCHAR(6) NULL,
  PRIMARY KEY (`payment_id`),
  INDEX `fk_ORDER_PAYMENT_ORDERS1_idx` (`ORDERS_ORDER_ID` ASC),
  CONSTRAINT `fk_ORDER_PAYMENT_ORDERS1`
    FOREIGN KEY (`ORDERS_ORDER_ID`)
    REFERENCES `MEESIG`.`ORDERS` (`ORDER_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`USERS_DESTINATION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`USERS_DESTINATION` (
  `destination_id` BIGINT NOT NULL AUTO_INCREMENT,
  `USERS_USER_ID` INT NOT NULL,
  `destination_postcd` VARCHAR(10) NULL,
  `destination_address` VARCHAR(100) NULL,
  `destination_inmaddress` VARCHAR(100) NULL,
  `destination_rnaddress` VARCHAR(100) NULL,
  `destination_user_memo` VARCHAR(40) NULL,
  PRIMARY KEY (`destination_id`),
  INDEX `fk_USERS_DESTINATION_USERS1_idx` (`USERS_USER_ID` ASC),
  CONSTRAINT `fk_USERS_DESTINATION_USERS1`
    FOREIGN KEY (`USERS_USER_ID`)
    REFERENCES `MEESIG`.`USERS` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`USERS_CSONE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`USERS_CSONE` (
  `csone_id` BIGINT NOT NULL AUTO_INCREMENT,
  `USERS_USER_ID` INT NOT NULL,
  `CSONE_CSONE_ID` BIGINT NOT NULL,
  `csone_content` VARCHAR(45) NULL,
  `csone_date` DATETIME NULL,
  PRIMARY KEY (`csone_id`),
  INDEX `fk_USERS_CSONE_USERS1_idx` (`USERS_USER_ID` ASC),
  INDEX `fk_USERS_CSONE_USERS_CSONE1_idx` (`CSONE_CSONE_ID` ASC),
  CONSTRAINT `fk_USERS_CSONE_USERS1`
    FOREIGN KEY (`USERS_USER_ID`)
    REFERENCES `MEESIG`.`USERS` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_USERS_CSONE_USERS_CSONE1`
    FOREIGN KEY (`CSONE_CSONE_ID`)
    REFERENCES `MEESIG`.`USERS_CSONE` (`csone_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`COUPONS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`COUPONS` (
  `coupon_id` INT NOT NULL AUTO_INCREMENT,
  `ITEMS_item_id` INT NOT NULL,
  `USERS_user_id` INT NOT NULL,
  `coupon_price` INT NULL,
  `coupon_type` TINYINT NULL,
  `coupon_publish_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `coupon_deadline` DATETIME NULL,
  `ORDER_BUNDLE_order_bundle_id` BIGINT NOT NULL,
  INDEX `fk_COUPONS_ITEMS1_idx` (`ITEMS_item_id` ASC),
  INDEX `fk_COUPONS_USERS1_idx` (`USERS_user_id` ASC),
  INDEX `fk_COUPONS_ORDER_BUNDLE1_idx` (`ORDER_BUNDLE_order_bundle_id` ASC),
  PRIMARY KEY (`coupon_id`),
  CONSTRAINT `fk_COUPONS_ITEMS1`
    FOREIGN KEY (`ITEMS_item_id`)
    REFERENCES `MEESIG`.`ITEMS` (`item_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COUPONS_USERS1`
    FOREIGN KEY (`USERS_user_id`)
    REFERENCES `MEESIG`.`USERS` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COUPONS_ORDER_BUNDLE1`
    FOREIGN KEY (`ORDER_BUNDLE_order_bundle_id`)
    REFERENCES `MEESIG`.`ORDER_BUNDLE` (`order_bundle_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`RECOMMEND_SHOP`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`RECOMMEND_SHOP` (
  `rec_shop_id` INT NOT NULL,
  `rec_shop_name` VARCHAR(100) NULL,
  `rec_shop_location` VARCHAR(100) NULL,
  `rec_shop_address` VARCHAR(100) NULL,
  `rec_shop_content` VARCHAR(1000) NULL,
  `rec_shop_item` VARCHAR(100) NULL,
  `rec_shop_call` VARCHAR(20) NULL,
  PRIMARY KEY (`rec_shop_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`BUNDLE_OPTION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`BUNDLE_OPTION` (
  `ORDER_BUNDLE_order_bundle_id` BIGINT NOT NULL,
  `ITEM_OPTION_option_id` INT NOT NULL,
  INDEX `fk_BUNDLE_OPTION_ORDER_BUNDLE1_idx` (`ORDER_BUNDLE_order_bundle_id` ASC),
  INDEX `fk_BUNDLE_OPTION_ITEM_OPTION1_idx` (`ITEM_OPTION_option_id` ASC),
  CONSTRAINT `fk_BUNDLE_OPTION_ORDER_BUNDLE1`
    FOREIGN KEY (`ORDER_BUNDLE_order_bundle_id`)
    REFERENCES `MEESIG`.`ORDER_BUNDLE` (`order_bundle_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_BUNDLE_OPTION_ITEM_OPTION1`
    FOREIGN KEY (`ITEM_OPTION_option_id`)
    REFERENCES `MEESIG`.`ITEM_OPTION` (`option_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`SHIPPING_DAY`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`SHIPPING_DAY` (
  `day_id` INT NOT NULL AUTO_INCREMENT,
  `ITEMS_item_id` INT NOT NULL,
  `day_mon` TINYINT(1) NULL,
  `day_tue` TINYINT(1) NULL,
  `day_wed` TINYINT(1) NULL,
  `day_thu` TINYINT(1) NULL,
  `day_fri` TINYINT(1) NULL,
  `day_sat` TINYINT(1) NULL,
  `day_sun` TINYINT(1) NULL,
  `day_send_time` TIME NULL,
  `day_send_day` DATE NULL,
  PRIMARY KEY (`day_id`),
  INDEX `fk_DELIVERY_DAY_ITEMS1_idx` (`ITEMS_item_id` ASC),
  CONSTRAINT `fk_DELIVERY_DAY_ITEMS1`
    FOREIGN KEY (`ITEMS_item_id`)
    REFERENCES `MEESIG`.`ITEMS` (`item_id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`SHIPPING_PRICE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`SHIPPING_PRICE` (
  `price_id` INT NOT NULL AUTO_INCREMENT,
  `ITEMS_item_id` INT NOT NULL,
  `price_group_id` TINYINT NULL,
  `price_price` BIGINT NULL,
  `price_desc` VARCHAR(40) NULL,
  PRIMARY KEY (`price_id`),
  INDEX `fk_DELIVERY_PRICE_ITEMS1_idx` (`ITEMS_item_id` ASC),
  CONSTRAINT `fk_DELIVERY_PRICE_ITEMS1`
    FOREIGN KEY (`ITEMS_item_id`)
    REFERENCES `MEESIG`.`ITEMS` (`item_id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MEESIG`.`MAIN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MEESIG`.`MAIN` (
  `row_id` INT NOT NULL AUTO_INCREMENT,
  `main_key` TINYINT NOT NULL,
  `main_order` TINYINT NULL,
  `MEDIA_media_id` INT NULL,
  `main_link_url` VARCHAR(100) NULL,
  `ITEMS_item_id` INT NULL,
  `main_text` VARCHAR(100) NULL,
  `main_sub` VARCHAR(100) NULL,
  INDEX `fk_table1_ITEMS1_idx` (`ITEMS_item_id` ASC),
  PRIMARY KEY (`row_id`),
  INDEX `index_main` (`main_key` ASC, `main_order` ASC),
  INDEX `fk_MAIN_MEDIA1_idx` (`MEDIA_media_id` ASC),
  CONSTRAINT `fk_table1_ITEMS1`
    FOREIGN KEY (`ITEMS_item_id`)
    REFERENCES `MEESIG`.`ITEMS` (`item_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MAIN_MEDIA1`
    FOREIGN KEY (`MEDIA_media_id`)
    REFERENCES `MEESIG`.`MEDIA` (`media_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;





/*
 * 
 *  Test Data
 * 
 */

use MEESIG;
INSERT INTO `meesig`.`media` (`media_file_name`, `media_file_extension`, `media_file_path`) VALUES ('testFile', 'jpg', 'localhost:8080/images/');
INSERT INTO `meesig`.`media` (`media_file_name`, `media_file_extension`, `media_file_path`) VALUES ('201503261102466217bd28-d01a-4b70-9132-f084dbbb56aa', 'jpg', 'http://localhost:8080/images/');
INSERT INTO `meesig`.`media` (`media_file_name`, `media_file_extension`, `media_file_path`) VALUES ('201503261102578821c86b-eea5-4449-97f9-18eba8af02d4', 'jpg', 'http://localhost:8080/images/');
INSERT INTO `meesig`.`media` (`media_file_name`, `media_file_extension`, `media_file_path`) VALUES ('201503261103081f0d9732-9727-4a8d-8a51-79a27b87a6b7', 'jpg', 'http://localhost:8080/images/');


INSERT INTO `meesig`.`ITEM_CATEGORY` (`category_name`) VALUES ('집밥');
INSERT INTO `meesig`.`locations` (`location_code`, `location_name`, `media_media_id`) VALUES ('02', '서울', 1);
INSERT INTO `meesig`.`shops` (`LOCATIONS_LOCATION_ID`, `shop_name`, `shop_discription`, `shop_content`, `shop_location_detail`, `shop_state`, `media_media_id`) VALUES (1, '미래식당', '미래의 식당입니다', '내요내용내요용', '지역정보', '1', 1);


insert into USERS (user_login_id, user_crc_id, user_password, user_name, user_email, user_b_date, user_gender, user_role, user_location) values ('admin', 2012344969, '$P$B5ckvzqvKn5trCl7UGhrEMTROguCFx.', 'name', 'test@test.com', '1999-01-01 00:00:00.0', 'm', 'ADMIN', '서울 용산구'); 

/*
	main page test data
*/

INSERT INTO `meesig`.`items` (`ITEM_CATEGORY_ID`, `SHOPS_SHOP_ID`, `MEDIA_media_id`, `item_name`, `item_path_url`, `item_description`, `item_sell_price`, `item_sale_price`, `item_supply_price`, `item_daily_stock`, `item_option_state`, `item_shipping_day_state`, `item_shipping_price_state`, `item_new_menu_state`) VALUES ('1', '1', '2', '머구리', '/temp', '맛있는 물회', '36000', '33000', '30000', '10', '1', '3', '3', '1');
INSERT INTO `meesig`.`items` (`ITEM_CATEGORY_ID`, `SHOPS_SHOP_ID`, `MEDIA_media_id`, `item_name`, `item_path_url`, `item_description`, `item_sell_price`, `item_sale_price`, `item_supply_price`, `item_daily_stock`, `item_option_state`, `item_shipping_day_state`, `item_shipping_price_state`, `item_new_menu_state`) VALUES ('1', '1', '4', '닭강정', '/joongang', '닭이좋아용', '18000', '16000', '15000', '100', '2', '2', '3', '0');
INSERT INTO `meesig`.`items` (`ITEM_CATEGORY_ID`, `SHOPS_SHOP_ID`, `MEDIA_media_id`, `item_name`, `item_path_url`, `item_description`, `item_sell_price`, `item_sale_price`, `item_supply_price`, `item_daily_stock`, `item_option_state`, `item_shipping_day_state`, `item_shipping_price_state`, `item_new_menu_state`) VALUES ('1', '1', '3', '빵', '/bbang', '빵!', '12300', '12000', '10000', '30', '2', '1', '3', '0');


INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `main_link_url`, `ITEMS_item_id`, `main_text`, `main_sub`) VALUES ('1', '1', '2', '/asdf', '1','https://meesig.com/wordpress/wp-content/uploads/2013/12/banner-introduce.jpg','설명');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `main_link_url`, `ITEMS_item_id`, `main_text`, `main_sub`) VALUES ('1', '2', '3', '/asdf', '2','https://meesig.com/wordpress/wp-content/uploads/2015/01/banner_jungang_product_m2.jpg','설명설명');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `main_link_url`, `ITEMS_item_id`, `main_text`, `main_sub`) VALUES ('1', '2', '3', '/asdf', '2','/images/banner_preview_1000.png','설명설명!!');

INSERT INTO `meesig`.`MAIN` (`main_key`, `MEDIA_media_id`, `ITEMS_item_id`) VALUES ('2', '2', '1');
INSERT INTO `meesig`.`MAIN` (`main_key`, `MEDIA_media_id`, `ITEMS_item_id`) VALUES ('3', '3', '2');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`, `main_text`, `main_sub`) VALUES ('4', '2', '3', '3', '추천해요', '진짜로');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`, `main_text`, `main_sub`) VALUES ('4', '3', '3', '1', '맛있어', '가짜로');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`, `main_text`, `main_sub`) VALUES ('4', '4', '3', '2', '이건', '헉');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`, `main_text`, `main_sub`) VALUES ('4', '2', '3', '1', 'ㅁㄴㄹㅁㄴㅇㄹㅁㄴㅇㄹ', 'ㅁㄴㅇㄹㅁㄴ');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`, `main_text`, `main_sub`) VALUES ('5', '3', '3', '3', '이제까지 먹었네요', '익명');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`, `main_text`, `main_sub`) VALUES ('5', '4', '3', '2', '이건정말', '내가');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`) VALUES ('6', '1', '3', '1');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`) VALUES ('6', '2', '3', '2');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`) VALUES ('6', '3', '3', '3');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`) VALUES ('6', '4', '3', '1');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`) VALUES ('6', '5', '3', '2');
INSERT INTO `meesig`.`MAIN` (`main_key`, `main_order`, `MEDIA_media_id`, `ITEMS_item_id`) VALUES ('6', '6', '3', '3');



